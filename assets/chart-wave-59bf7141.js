var x=Object.defineProperty;var T=(s,t,e)=>t in s?x(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var l=(s,t,e)=>(T(s,typeof t!="symbol"?t+"":t,e),e),m=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var _=(s,t,e)=>(m(s,t,"read from private field"),e?e.call(s):t.get(s)),u=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},v=(s,t,e,i)=>(m(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e);function W(s){const t=s/2;return t/Math.floor(t)===1||t===0}var p,d,r;class b{constructor(t){l(this,"_canvas");l(this,"_ctx");l(this,"option");u(this,p,0);u(this,d,0);u(this,r,0);l(this,"_animationId",null);this.option=Object.assign({percentage:0,radian:1,color:"#0080ff",noTransition:!1,speed:1},t),this._canvas=document.createElement("canvas"),this._canvas.width=t.size||t.el.offsetWidth,this._canvas.height=t.size||t.el.offsetWidth,this._canvas.style.borderRadius="50%",t.el.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),v(this,r,this._canvas.width/2),this.animation()}_drawWave(t){const e=this._ctx,i=_(this,r),a=_(this,d),n=_(this,p);function f(c){const h=i*(c+1)+t;return c===0?e.moveTo(i*c+t,a):e.lineTo(i*c+t,a),e.quadraticCurveTo(i*(c+1)-i/2+t,a+n,h,a),h}function g(c){const h=i*(c+1)+t;return c===0?e.moveTo(i*c+t,a):e.lineTo(i*c+t,a),e.quadraticCurveTo(i*(c+1)-i/2+t,a*2-(a+n),h,a),h}let o=0;return function(h){for(;o<=h;){const w=W(o)?f(o):g(o);if(o===h)return w;o++}}}_graph(t=0,e="#00f"){this._ctx.beginPath();const i=this._drawWave(t),a=this._canvas.width/_(this,r)*2,n=i(a);this._ctx.lineTo(n,_(this,d)),this._ctx.lineTo(n,this._canvas.height),this._ctx.lineTo(t,this._canvas.height),this._ctx.closePath(),this._ctx.fillStyle=e,this._ctx.fill()}animation(){let t=-this._canvas.width,e=-this._canvas.width,i=-this._canvas.width,a=0;const n=this;f();function f(){a>n.option.percentage&&a--,a<n.option.percentage&&a++,v(n,d,n._canvas.height-n._canvas.height*(a/100));const g=a<60?a/2:(100-a)/2+10;v(n,p,g*n.option.radian),t>0&&(t=-n._canvas.width),e>0&&(e=-n._canvas.width),i>0&&(i=-n._canvas.width),n._ctx.clearRect(0,0,n._canvas.width,n._canvas.height);const o=n.option.color;n._graph(t,o+"33"),n._graph(e,o+"55"),n._graph(i,o),t+=4*n.option.speed,e+=3*n.option.speed,i+=2*n.option.speed,n._animationId=requestAnimationFrame(f)}}refresh(){if(this._canvas.width=this.option.size||this.option.el.offsetWidth,this._canvas.height=this.option.size||this.option.el.offsetWidth,v(this,r,this._canvas.width/2),this.option.noTransition)return;let t=0,e=null;const i=this;(function(){cancelAnimationFrame(i._animationId),t=i.option.percentage,i.option.percentage=0,a(),i.animation()})();function a(){if(i.option.percentage>=t){cancelAnimationFrame(e);return}i.option.percentage++,e=requestAnimationFrame(a)}}}p=new WeakMap,d=new WeakMap,r=new WeakMap;export{b as C};
