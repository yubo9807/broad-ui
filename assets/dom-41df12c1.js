import{r as a,o as f,f as r,h as n,u as m}from"./pl-vue-ca8bc5b7.js";import{c as v}from"./index-7dd57f7e.js";import"./marked-d5c18544.js";function h(e){e=Object.assign({row:2,unfold:"展开",fold:"收起"},e);const o=a(e.text),s=a(!1),l=a(!1),u=a(),i=a();let c;f(()=>{c=getComputedStyle(u.value),d()}),f(()=>{const t=v(c.getPropertyValue("--line-height"));i.value.offsetHeight<t*e.row&&(s.value=!0)});function d(){const t=v(c.getPropertyValue("font-size"));s.value=t*o.value.length<u.value.offsetWidth*e.row-e.unfold.length*t}return r({setText(t){o.value=t,d()},setOpen(t){l.value=t}}),n("div",{ref:u,className:"unfold-text"},()=>s.value?n("div",null,()=>o.value):n("div",{className:()=>["wrap",!l.value&&"is-open"],style:`--row: ${e.row}`},()=>!l.value&&n("div",{className:"btn"},"...",n("span",{className:"open",onclick:()=>l.value=!0,created:e.unfoldEl},e.unfold)),n("div",{ref:i,className:"content"},()=>o.value),()=>l.value&&n("div",{className:"close",onclick:()=>l.value=!1,created:e.foldEl},e.fold)))}const N=()=>{const e=m(h,{text:"这是一段很长很长很长很长很长很长很长很长很长很很长很长很长很长很长很长很长很长很长很长的文本，它会被自动展开。"});e.style.width="200px",document.getElementById("container").appendChild(e)};export{N as default};
