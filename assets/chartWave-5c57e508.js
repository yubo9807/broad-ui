var z=Object.defineProperty;var x=(a,t,i)=>t in a?z(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i;var l=(a,t,i)=>(x(a,typeof t!="symbol"?t+"":t,i),i),m=(a,t,i)=>{if(!t.has(a))throw TypeError("Cannot "+i)};var p=(a,t,i)=>(m(a,t,"read from private field"),i?i.call(a):t.get(a)),u=(a,t,i)=>{if(t.has(a))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(a):t.set(a,i)},d=(a,t,i,n)=>(m(a,t,"write to private field"),n?n.call(a,i):t.set(a,i),i);import{i as T}from"./number-1e8ebfe5.js";var v,_,r;class C{constructor(t){l(this,"_canvas");l(this,"_ctx");l(this,"option");u(this,v,0);u(this,_,0);u(this,r,0);l(this,"_animationId",null);var i;this.option=Object.assign({percentage:0,radian:1,color:"#0080ff",noTransition:!1,speed:1},t),(i=this.option).size??(i.size=t.el.clientWidth),this.option.size=Array.isArray(this.option.size)?this.option.size:[this.option.size,this.option.size],this._canvas=document.createElement("canvas"),this._canvas.width=this.option.size[0],this._canvas.height=this.option.size[1],t.el.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),d(this,r,this._canvas.width/2),this.animation()}_drawWave(t){const i=this._ctx,n=p(this,r),s=p(this,_),e=p(this,v);function g(o){const c=n*(o+1)+t;return o===0?i.moveTo(n*o+t,s):i.lineTo(n*o+t,s),i.quadraticCurveTo(n*(o+1)-n/2+t,s+e,c,s),c}function f(o){const c=n*(o+1)+t;return o===0?i.moveTo(n*o+t,s):i.lineTo(n*o+t,s),i.quadraticCurveTo(n*(o+1)-n/2+t,s*2-(s+e),c,s),c}let h=0;return function(c){for(;h<=c;){const w=T(h)?g(h):f(h);if(h===c)return w;h++}}}_graph(t=0,i="#00f"){this._ctx.beginPath();const n=this._drawWave(t),s=this._canvas.width/p(this,r)*2,e=n(s);this._ctx.lineTo(e,p(this,_)),this._ctx.lineTo(e,this._canvas.height),this._ctx.lineTo(t,this._canvas.height),this._ctx.closePath(),this._ctx.fillStyle=i,this._ctx.fill()}animation(){let t=-this._canvas.width,i=-this._canvas.width,n=-this._canvas.width,s=0;const e=this;g();function g(){s>e.option.percentage&&s--,s<e.option.percentage&&s++,d(e,_,e._canvas.height-e._canvas.height*(s/100));const f=s<60?s/2:(100-s)/2+10;d(e,v,f*e.option.radian),t>0&&(t=-e._canvas.width),i>0&&(i=-e._canvas.width),n>0&&(n=-e._canvas.width),e._ctx.clearRect(0,0,e._canvas.width,e._canvas.height);const h=e.option.color;e._graph(t,h+"33"),e._graph(i,h+"55"),e._graph(n,h),t+=4*e.option.speed,i+=3*e.option.speed,n+=2*e.option.speed,e._animationId=requestAnimationFrame(g)}}refresh(){var e;if((e=this.option).size??(e.size=this.option.el.clientWidth),this.option.size=Array.isArray(this.option.size)?this.option.size:[this.option.size,this.option.size],this._canvas.width=this.option.size[0],this._canvas.height=this.option.size[1],d(this,r,this._canvas.width/2),this.option.noTransition)return;let t=0,i=null;const n=this;(function(){cancelAnimationFrame(n._animationId),t=n.option.percentage,n.option.percentage=0,s(),n.animation()})();function s(){if(n.option.percentage>=t){cancelAnimationFrame(i);return}n.option.percentage++,i=requestAnimationFrame(s)}}}v=new WeakMap,_=new WeakMap,r=new WeakMap;export{C};
