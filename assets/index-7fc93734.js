import{r as o,w as r,h as l,o as d,q as m}from"./pl-vue-6d352d3f.js";import{i as h,e as v}from"./index-83ef8953.js";function N(e){e=Object.assign({row:2,unfold:"展开",fold:"收起"},e);const n=h(e.model)?e.model:o(e.model),u=o(!1),a=o(!1),c=o(),i=o();let s;d(()=>{s=getComputedStyle(c.value),f()}),r(()=>n.value,()=>{f()}),d(()=>{const t=v(s.getPropertyValue("--line-height"));i.value.offsetHeight<t*e.row&&(u.value=!0)});function f(){const t=v(s.getPropertyValue("font-size"));u.value=t*n.value.length<c.value.offsetWidth*e.row-e.unfold.length*t}return m({setModel(t){n.value=t},setOpen(t){a.value=t}}),l("div",{ref:c,className:"br-unfold-text"},()=>u.value?l("div",null,()=>n.value):l("div",{className:()=>["wrap",!a.value&&"is-open"],style:`--row: ${e.row}`},()=>!a.value&&l("div",{className:"btn"},"...",l("span",{className:"open",onclick:()=>a.value=!0,created:e.unfoldEl},e.unfold)),l("div",{ref:i,className:"content"},()=>n.value),()=>a.value&&l("div",{className:"close",onclick:()=>a.value=!1,created:e.foldEl},e.fold)))}export{N as U};
