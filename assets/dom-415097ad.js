var x=Object.defineProperty;var T=(a,t,e)=>t in a?x(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var _=(a,t,e)=>(T(a,typeof t!="symbol"?t+"":t,e),e),m=(a,t,e)=>{if(!t.has(a))throw TypeError("Cannot "+e)};var d=(a,t,e)=>(m(a,t,"read from private field"),e?e.call(a):t.get(a)),u=(a,t,e)=>{if(t.has(a))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(a):t.set(a,e)},p=(a,t,e,n)=>(m(a,t,"write to private field"),n?n.call(a,e):t.set(a,e),e);import"./index-d93b1242.js";import"./pl-vue-94f8847c.js";import"./marked-d5c18544.js";function W(a){const t=a/2;return t/Math.floor(t)===1||t===0}var f,l,r;class I{constructor(t){_(this,"_canvas");_(this,"_ctx");_(this,"option");u(this,f,0);u(this,l,0);u(this,r,0);_(this,"_animationId",null);this.option=Object.assign({percentage:0,radian:1,color:"#0080ff",noTransition:!1,speed:1},t),this._canvas=document.createElement("canvas"),this._canvas.width=t.size||t.el.offsetWidth,this._canvas.height=t.size||t.el.offsetWidth,this._canvas.style.borderRadius="50%",t.el.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),p(this,r,this._canvas.width/2),this.animation()}_drawWave(t){const e=this._ctx,n=d(this,r),o=d(this,l),i=d(this,f);function v(s){const h=n*(s+1)+t;return s===0?e.moveTo(n*s+t,o):e.lineTo(n*s+t,o),e.quadraticCurveTo(n*(s+1)-n/2+t,o+i,h,o),h}function g(s){const h=n*(s+1)+t;return s===0?e.moveTo(n*s+t,o):e.lineTo(n*s+t,o),e.quadraticCurveTo(n*(s+1)-n/2+t,o*2-(o+i),h,o),h}let c=0;return function(h){for(;c<=h;){const w=W(c)?v(c):g(c);if(c===h)return w;c++}}}_graph(t=0,e="#00f"){this._ctx.beginPath();const n=this._drawWave(t),o=this._canvas.width/d(this,r)*2,i=n(o);this._ctx.lineTo(i,d(this,l)),this._ctx.lineTo(i,this._canvas.height),this._ctx.lineTo(t,this._canvas.height),this._ctx.closePath(),this._ctx.fillStyle=e,this._ctx.fill()}animation(){let t=-this._canvas.width,e=-this._canvas.width,n=-this._canvas.width,o=0;const i=this;v();function v(){o>i.option.percentage&&o--,o<i.option.percentage&&o++,p(i,l,i._canvas.height-i._canvas.height*(o/100));const g=o<60?o/2:(100-o)/2+10;p(i,f,g*i.option.radian),t>0&&(t=-i._canvas.width),e>0&&(e=-i._canvas.width),n>0&&(n=-i._canvas.width),i._ctx.clearRect(0,0,i._canvas.width,i._canvas.height);const c=i.option.color;i._graph(t,c+"33"),i._graph(e,c+"55"),i._graph(n,c),t+=4*i.option.speed,e+=3*i.option.speed,n+=2*i.option.speed,i._animationId=requestAnimationFrame(v)}}refresh(){if(this._canvas.width=this.option.size||this.option.el.offsetWidth,this._canvas.height=this.option.size||this.option.el.offsetWidth,p(this,r,this._canvas.width/2),this.option.noTransition)return;let t=0,e=null;const n=this;(function(){cancelAnimationFrame(n._animationId),t=n.option.percentage,n.option.percentage=0,o(),n.animation()})();function o(){if(n.option.percentage>=t){cancelAnimationFrame(e);return}n.option.percentage++,e=requestAnimationFrame(o)}}}f=new WeakMap,l=new WeakMap,r=new WeakMap;const A=()=>{const a=new I({el:document.getElementById("container"),percentage:30,size:300});setInterval(()=>{const t=Math.random()*100;a.option.percentage=t,a.option.color=t>60?"#ffaa00":"#0080ff"},2e3)};export{A as default};
