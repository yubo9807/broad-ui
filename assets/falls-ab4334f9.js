var d=Object.defineProperty;var f=(s,t,o)=>t in s?d(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var c=(s,t,o)=>(f(s,typeof t!="symbol"?t+"":t,o),o);import{j as w}from"./pl-vue-9a5e3e23.js";function a(s,t=void 0){const o=new Array(s);let i=0;for(;i<o.length;)o[i]=w(t),i++;return o}class g{constructor(t={}){c(this,"option");c(this,"_matrix");const{column:o,rowGap:i,colGap:n,el:e}=t;if(this.option={column:o||5,rowGap:i||20,colGap:n||14},!e)return;e.style.position="relative";const r=[...e.children],h=r.map(p=>p.offsetHeight),{itemWidth:l,positions:u,wrapHeight:x}=this.compute(e.clientWidth,h);r.forEach((p,m)=>{p.style.position="absolute",p.style.width=l+"px",p.style.top=u[m].top+"px",p.style.left=u[m].left+"px"}),e.style.height=x+"px"}compute(t,o){const i=this.computeItemWidth(t),n=this.computeItemPosition(o,i),e=this.computeWrapHeight();return{itemWidth:i,positions:n,wrapHeight:e}}computeItemWidth(t){return(t-this.option.rowGap*(this.option.column-1))/this.option.column}computeItemPosition(t,o){this._matrix=a(this.option.column,[0]);const i=[];for(let n=0;n<t.length;n++){const e=this._queryColumn("min"),r=this._matrix[e].reduce((h,l)=>h+l);i.push({top:r+this.option.colGap*(this._matrix[e].length-1),left:e*(o+this.option.rowGap)}),this._matrix[e].push(t[n])}return i}computeWrapHeight(){const t=this._queryColumn("max");return this._matrix[t].reduce((o,i)=>o+i+this.option.rowGap)-this.option.rowGap}_queryColumn(t){const o=a(this._matrix.length,0);for(let n=0;n<this._matrix.length;n++)o[n]=this._matrix[n].reduce((e,r)=>e+r);const i=Math[t].apply(null,o);return o.indexOf(i)}}export{g as F};
