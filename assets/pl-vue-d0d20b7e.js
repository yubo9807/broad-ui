var ee=Object.defineProperty;var ne=(t,r,e)=>r in t?ee(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var d=(t,r,e)=>(ne(t,typeof r!="symbol"?r+"":r,e),e),pt=(t,r,e)=>{if(!r.has(t))throw TypeError("Cannot "+e)};var T=(t,r,e)=>(pt(t,r,"read from private field"),e?e.call(t):r.get(t)),E=(t,r,e)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,e)},jt=(t,r,e,n)=>(pt(t,r,"write to private field"),n?n.call(t,e):r.set(t,e),e);var x=(t,r,e)=>(pt(t,r,"access private method"),e);function Pt(){return Number((Math.random()+"").slice(2)).toString(32)}function H(...t){console.warn(...t)}function y(t){return t.length}function at(t){return Object.prototype.toString.call(t).slice(8,-1)}function re(t){return t.toString().slice(0,5)==="class"}function se(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function Mt(t,r){if($(t)&&$(r)){const e=Object.keys(t),n=Object.keys(r);if(y(e)!==y(n))return!1;for(const s of e)if(!n.includes(s)||!Mt(t[s],r[s]))return!1;return!0}else return t===r}function ft(){return typeof window=="object"}function $(t){return typeof t=="object"&&t!==null}function yt(t){return F(t)||at(t)==="Array"}function F(t){return at(t)==="Object"}function D(t){return Array.isArray(t)}function j(t){return typeof t=="string"}function g(t){return typeof t=="function"}function v(t){Promise.resolve().then(t)}class M extends WeakMap{}function S(t,r={}){const e=new M,n=["Null","Regexp","Date","WeakSet","WeakMap"],s=Object.assign({Function(u){const o=function(...c){return u.apply(this,c)};return o.prototype=i(u.prototype),o},Set(u){const o=new Set;for(const c of u)o.add(i(c));return o},Map(u){const o=new Map;for(const[c,a]of u.entries())o.set(c,i(a));return o}},r);function i(u){if(ft()&&u instanceof HTMLElement)return u.cloneNode(!0);const o=at(u);if(!["object","function"].includes(typeof u)||n.includes(o))return u;if(e.has(u))return e.get(u);if(s[o])return s[o](u);const c=D(u)?[]:{};Object.setPrototypeOf(c,Object.getPrototypeOf(u)),e.set(u,c);for(const a in u)u.hasOwnProperty(a)&&(c[a]=i(u[a]));return c}return i(t)}function tt(t,r){return Object.assign({},t,r)}function h(t,r,e){let n=0;for(;n<t.length;){if(t.hasOwnProperty(n)){const s=t[n];r.apply(e,[s,n,e])}n++}}let W=null;const B=new M;function Nt(t){W=t,t(),W=null}function oe(t){const r=B.get(t)||[],e=r.some(n=>W===n);W&&!e&&(r.push(W),B.set(t,r))}function Lt(t){const r=B.get(t);r&&(h(r,(e,n)=>{e()===!0&&delete r[n]}),B.set(t,r.filter(e=>e)))}function je(...t){function r(e){const n=lt(e);for(const s in n){const i=n[s];$(i)&&r(i)}B.delete(n)}h(t,r)}const ie=new M,ht=new M,et={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function z(t){if(!yt(t)||Object.isFrozen(t))return H(`lue cannot be made reactive: ${t}`),t;if(ie.get(t))return t;let r=null;return new Proxy(t,{get(e,n,s){if(n===et.RAW)return e;const i=Reflect.get(e,n,s);return oe(e),yt(i)?z(i):i},set(e,n,s,i){if(e[et.IS_READONLY]||Reflect.get(e,n,i)===s)return!0;const o=Reflect.set(e,n,s,i),c=ht.get(e)||new Set;c.add(n);const a=c.size;return ht.set(e,c),v(()=>{o&&a===1&&Lt(e),ht.delete(e)}),o},deleteProperty(e,n){const s=Reflect.get(e,n),i=se(e,n),u=Reflect.deleteProperty(e,n);return r=n,v(()=>{i&&u&&s!==void 0&&n===r&&(Lt(e),r=null)}),u}})}function ce(t){return $(t)&&!!t[et.RAW]}function lt(t){return ce(t)?t[et.RAW]:t}function ue(t){const r={value:t},e=z(r);function n(){return e.value}function s(i){e.value=i}return[n,s,r]}const Tt=Symbol("__v_isRef");var Ee;class ae{constructor(r){d(this,Ee,!0);d(this,"_rawValue");d(this,"_value");d(this,"getSignal");d(this,"setSignal");const[e,n,s]=ue(r);this._rawValue=s,this.getSignal=e,this.setSignal=n,this._value=e()}get value(){return this.getSignal()}set value(r){this.setSignal(r)}}Ee=Tt;function fe(t=void 0){return new ae(t)}function Pe(t){return t&&!!t[Tt]}class le{constructor(r){d(this,"fn");this.fn=r}}var Oe;class _t{constructor(r,e){d(this,"__v_isReadonly",!0);d(this,Oe,!0);d(this,"_cacheable",!0);d(this,"_dirty",!0);d(this,"computed");d(this,"_setter");this.computed=new le(r),this._setter=e}get value(){return this.computed.fn()}set value(r){this._setter?this._setter(r):H("Write operation failed: computed value is readonly")}}Oe=Tt;function Le(t){return g(t)?new _t(t):new _t(t.get,t.set)}function pe(t,r,e={}){let n=!1;if(n)return;const s=t();e.immediate&&r(s,void 0);let i=S(s),u=!0;return Nt(()=>{if(n)return!0;const o=t();if(yt(o)){e.deep&&!Mt(o,i)&&(r(o,i),i=S(o));return}if(u){u=!1;return}o!==i&&(r(o,i),i=o)}),()=>{n=!0,i=t=r=e=null}}function L(t){return["string","number"].includes(typeof t)&&t!==""}function Bt(t){return!/^on/.test(t)}function he(t){return F(t)&&j(t.tag)}function R(t){return g(t)&&!I(t)}function Ut(t){return re(t)&&t.prototype&&t.prototype.render}function bt(t){return[void 0,null,"",!0,!1].includes(t)}function wt(...t){const r=[];return h(t,e=>{g(e)&&(e=e()),L(e)&&r.push(e)}),r.join(" ").trim().replace(/\s+/," ")}function dt(t){return document.createTextNode(t)}function A(t,r){t.appendChild(r)}function b(t,r,...e){const n={tag:t,attrs:r||{},children:e};return R(n.tag)&&y(n.children)===0&&n.attrs.children&&(n.children=n.attrs.children),n}function P({children:t}){return t}const nt=Symbol("Fragment");P.prototype[nt]=nt;function I(t){return g(t)&&t.prototype&&t.prototype[nt]===nt}const J=new M;function Vt(t,r=[]){return h(t,e=>{$(e)&&(R(e.tag)?(r.push({comp:e.tag,props:tt(e.attrs,{children:t})}),h(e.children,n=>{R(n)&&r.push({comp:n,props:{}})})):L(e.tag)&&Vt(e.children,r))}),r}function Et(t,r=[]){const e=J.get(t)||[];return r.push(...e),h(e,n=>{const s=Et(n.comp);r.push(...s)}),r}let rt=null;function de(t){rt=t}let Rt=null;function _e(t){Rt=t}function me(t,r){rt=t,"ref"in r&&(r.ref.value=Rt),Rt=null}let Ot=!1;function $t(t){Ot=t}const At=[];function ge(){h(At,t=>t()),At.length=0}const St=[];let Kt=!1;function $e(t){if(!Ot){if(Kt){v(t);return}St.push(t)}}function ye(){h(St,t=>t()),St.length=0,Kt=!0}const st=new M;function Ae(t){if(Ot)return;const r=st.get(rt)||[];r.some(n=>n===t)||(r.push(t),st.set(rt,r))}function Dt(t){const r=Et(t).map(n=>n.comp);r.unshift(t);const e=[];h(r,n=>{const s=st.get(n)||[];e.push(...s),st.delete(n)}),h(e,n=>n())}const Wt=new M;function It(t){const r=Et(t).map(n=>n.comp);r.unshift(t);const e=[];h(r,n=>{const s=Wt.get(n)||[];e.push(...s),Wt.delete(n)}),h(e,n=>n())}class be{constructor(){}intercept(r){return console.log(r),r}renderToString(r){$t(!0);const e=this.createHTML(r);return $t(!1),e}createHTML(r){const{tag:e,attrs:n,children:s}=this.intercept(r);if(I(e)){const o=tt(n,{children:s}),c=e(o);return this.createHTMLFragment(c)}if(R(e)){if(Ut(e)){const a=new e({...n,children:s});return this.createHTML(a.render.bind(a))}const o=tt(n,{children:s}),c=e(o);return this.createHTML(c)}let i="";for(const o in n){if(o.startsWith("on")||["ref","created"].includes(o))continue;let c=g(n[o])&&Bt(o)?n[o]():n[o];if(j(e)&&["innerHTML","innerText","textContent"].includes(o)){s[0]=c;continue}if(o==="className"){c&&(i+=` class="${wt(...[c].flat())}"`);continue}if(o==="style"&&F(c)){for(const a in c)g(c[a])&&(c[a]=c[a]());c='"'+JSON.stringify(c).slice(1,-1).replace(/"/g,"").replace(/,/g,";")+'"'}i+=` ${o}="${c}"`}const u=this.createHTMLFragment(s);return`<${e}${i}>${u}</${e}>`}createHTMLFragment(r){let e="";return h(r,n=>{if(!bt(n)){if(L(n)){e+=n.toString();return}if(D(n)){e+=this.createHTMLFragment(n);return}if(g(n)){const s=n();e+=this.createHTMLFragment([s]);return}if(F(n)){e+=this.createHTML(n);return}H(`renderToString: 不支持 ${n} 值渲染`)}}),e}}var C,V,xt,_,Q,ct,Yt,ut,Gt;class zt extends be{constructor(e){super();E(this,V);E(this,_);E(this,ct);E(this,ut);E(this,C,void 0);jt(this,C,e.binding)}render(e){const n=this.createElement(e);return ge(),v(ye),n}createElement(e){const{tag:n,attrs:s,children:i}=this.intercept(e);if(j(n))return this.createRealNode(n,s,i);if(I(n))return this.createNodeFragment(i);if(R(n))return this.createComponent(n,s,i)}createComponent(e,n,s){if(de(e),Ut(e)){const o=new e({...n,children:s});e=o.render.bind(o)}const i=tt(n,{children:s}),u=e(i);return me(e,n),L(u)?dt(u):(J.set(e,Vt([u,...u.children])),this.createElement(u))}createRealNode(e,n={},s=[""]){const i=document.createElement(e),u=n.created;if(g(u)){const o=s.findIndex(c=>c===u);o>=0&&s.splice(o,1)}h(s,o=>{if(this.intercept(o),g(o)){const c=this.createNodeFragment([o]);A(i,c)}else x(this,V,xt).call(this,i,o)});for(const o in n)x(this,ct,Yt).call(this,i,o,n[o]);if(n.style&&F(n.style))for(const o in n.style){const c=n.style[o];g(c)?T(this,C).call(this,()=>i.style[o]=c()):i.style[o]=c}return i}createNodeFragment(e){const n=document.createDocumentFragment();return h(e,s=>{this.intercept(s),g(s)?x(this,ut,Gt).call(this,n,s):x(this,V,xt).call(this,n,s)}),n}}C=new WeakMap,V=new WeakSet,xt=function(e,n){if(!bt(n)){if(D(n)){const s=this.createNodeFragment(n);A(e,s);return}if(L(n)||F(n)){const s=x(this,_,Q).call(this,n);A(e,s);return}H(`render: 不支持 ${n} 值渲染`)}},_=new WeakSet,Q=function(e){if(L(e))return dt(e);if(he(e))return this.createRealNode(e.tag,e.attrs,e.children);if(I(e.tag))return this.createNodeFragment(e.children);if(R(e.tag))return this.createComponent(e.tag,e.attrs,e.children)},ct=new WeakSet,Yt=function(e,n,s){if(n==="ref"&&F(s)){s.value=e;return}if(n==="created"&&g(s)){s(e);return}if(n==="className"&&D(s)){T(this,C).call(this,()=>{e[n]=wt(...s)});return}let i=u=>e[n]=u;n==="className"?i=u=>e[n]=wt(u):n.startsWith("data-")&&(i=u=>e.dataset[n.slice(5)]=u),Bt(n)&&g(s)?T(this,C).call(this,()=>i(s())):i(s)},ut=new WeakSet,Gt=function(e,n){let s=[],i=!0,u=null;const o=dt("");A(e,o),T(this,C).call(this,()=>{let c=n();if(c&&$(c)&&I(c.tag)){H("不支持响应式节点片段渲染");return}D(c)||(c=[c]),c=c.filter(f=>!bt(f));let a=0;for(;a<y(c);){let f=c[a];const p=we(s,a);if(p>=0){if(Mt(f,s[p].tree)){a++;continue}const m=x(this,_,Q).call(this,f);if(!m){c.splice(p,1),a++;continue}const N=s[p].tree;if(R(N.tag)&&Dt(N.tag),s[p].node.parentElement.replaceChild(m,s[p].node),R(N.tag)){const Y=N.tag;It(Y),J.delete(Y)}s[p].tree=f,s[p].node=m}else{const m=x(this,_,Q).call(this,f);if(!m){a++;continue}if(i)A(e,m);else if(y(s)===0)u??(u=o.parentElement),u.insertBefore(m,o.nextSibling);else{const N=s[y(s)-1].node,Y=N.nextSibling;N.parentElement.insertBefore(m,Y)}s.push({key:a,tree:f,node:m})}a++}if(y(s)>y(c)){for(let f=y(c);f<y(s);f++){const p=s[f].tree;if(R(p.tag)&&Dt(p.tag),s[f].node.remove(),R(p.tag)){const m=p.tag;It(m),J.delete(m)}}s.splice(y(c),y(s)-y(c))}i=!1})};function we(t,r){let e=0,n=y(t)-1;for(;e<=n;){const s=Math.ceil((e+n)/2),i=t[s];if(r===i.key)return s;r<i.key?n=s-1:r>i.key&&(e=s+1)}return-1}var K;class Re extends zt{constructor(e){super(e);d(this,"version","0.6.8");E(this,K,new Map);this.option=e}use(e){return e.install(this),this}intercept(e){if(e&&j(e.tag)){const n=T(this,K).get(e.tag);n&&(e.tag=n)}return e}component(e,n){return T(this,K).set(e,n),this}}K=new WeakMap;function De(){return new Re({binding:Nt})}function Se(t){return new zt({binding:Nt}).render(t)}function We(t,r){return Se(b(t,r))}function xe(t){const r={};return t.replace(/([^?&=]+)=([^&]+)/g,(e,n,s)=>r[n]=s),r}function X(t){const r=new URL("http://0.0.0.0"+t);return{fullPath:r.href.replace(r.origin,""),path:r.pathname,query:xe(r.search),hash:r.hash,meta:{}}}function Jt(t){let r="";for(const n in t.query)t.query[n]&&(r+=`${n}=${t.query[n]}&`);r=r?"?"+r.slice(0,-1):"";let e=t.hash?"#"+t.hash:"";return t.path+r+e}function Z(t){return t.replace(/\/{1,}/g,"/")}function Qt(t,r){j(t)&&(w.mode==="history"&&(t=w.base+t),t=X(t));for(const n in t)l[n]=t[n];const e=Jt(l);l.fullPath=e,ft()&&(w.mode==="history"?history[r==="push"?"pushState":"replaceState"]({},"",e):location.hash=e)}function Xt(t){Qt(t,"push")}function Zt(t){Qt(t,"replace")}function mt(t){history.go(t)}function ke(){return{back:()=>mt(-1),forward:()=>mt(1),go:mt,push:Xt,replace:Zt,options:w,currentRoute:lt(l)}}function vt(){return l}const w={base:"",mode:"history",ssrDataKey:"g_initialProps"};let te=null,l=null;function qt(){const{origin:t,href:r,hash:e}=location;return w.mode==="hash"?e.replace("#",""):r.replace(t+w.base,"")}let U=null;function Ie(t={}){if(Object.assign(w,t),ft()){const e=X(qt());l=z(e),window.addEventListener("popstate",()=>{const n=X(qt());for(const s in n)l[s]=n[s]})}else l=X("");const r=ke();return{install(e){te=e,e.$router=r,e.$route=vt()},...r,beforeEach(e){U=e}}}const ot={currentTemplate:"",ssrData:{}};function qe(t){}function Ft(t,r){r=r.replace(w.base,"");const e=t.find(c=>{const{path:a,exact:f}=c.attrs;return f===!1?(r+"/").startsWith(Z(a+"/")):Z(a)===r});if(!e)return;const{path:n,component:s,beforeEnter:i,meta:u,redirect:o}=e.attrs;return o?Ft(t,o):{path:Z(n),component:s,meta:u,beforeEnter:i}}let O;const Ht=[];function Ce(t){const r=fe(t.loading);let e={};function n(i){const u=Ft(t.children,i);if(!u){e={},r.value=t.notFound;return}async function o(){if(u.component.prototype||(u.component=(await u.component()).default),r.value===u.component)return;e.path=u.path;const a=Ct(u.component);if(a){const f=window[w.ssrDataKey];f&&e.path in f?(e.data=f[e.path],delete f[e.path]):e.data=await a(S(e))}r.value=u.component,e.meta=u.meta,l.meta=u.meta}function c(a){a(lt(l),O,()=>{O=S(l),i===l.path?o():n(l.path)})}if(U){c(U);return}if(u.beforeEnter){c(u.beforeEnter);return}O=S(l),o()}const s=pe(()=>l.path,i=>{if(O){const u=O.path.split("/"),o=i.split("/");u[1]!==o[1]&&h(Ht,c=>c())}n(i)},{immediate:!0});return t.prefix&&Ht.push(s),b(P,null,()=>r.value&&b(r.value,{...e}))}const q=z([]);function kt(t){const r=q.indexOf(t);q.splice(r,1)}let k=null;function Me(t){function r(o){let c=Ft(t.children,o);if(!c)return;l.path=c.path;function a(f){return k=`b_${Pt()}`,q.push(k),f(lt(l),O,()=>{O=S(l),G(k,c.component,{path:c.path,meta:c.meta}),kt(k)}),k}return U?a(U):c.beforeEnter?a(c.beforeEnter):c}let e=r(l.path);if(j(e))return b(P,null,e);if(!e){const o=t.notFound;return b(o||P,null)}e=e;let n=e.component;l.path=e.path,l.meta=e.meta;const s={path:e.path,meta:e.meta};k&&(G(k,n,s),kt(k));const i=`r_${Pt()}`;if(!n.prototype)return q.push(i),n().then(async o=>{n=o.default;const c=Ct(n);c&&(s.data=await c(S(s)),ot.ssrData[s.path]=s.data),G(i,n,s)}),b(P,null,i);const u=Ct(n);return u?(q.push(i),u(S(s)).then(o=>{s.data=o,ot.ssrData[s.path]=o,G(i,n,s)}),b(P,null,i)):b(n,{...s})}function He(t){return h(t.children,r=>{t.prefix&&(r.attrs.path=Z(t.prefix+r.attrs.path)),r.children=[r.attrs.component]}),ft()?b(Ce,{...t}):b(Me,{...t})}function G(t,r,e){const n=te.renderToString(b(r,{...e}));kt(t);const s=ot.currentTemplate.replace(t,n);ot.currentTemplate=s}function Ct(t){const{getInitialProps:r}=t.prototype;if(r&&g(r))return r}function Be(t){const{to:r,type:e,className:n,children:s,onClick:i,...u}=t,o=vt();j(r)||(t.to=Jt(Object.assign({},o,r)));const c=w.mode==="hash"?`${w.base}#${t.to}`:w.base+t.to;function a(f){f.preventDefault();function p(m=t.to){e==="replace"?Zt(m):Xt(m)}i?i(t.to,p):p()}return b("a",{className:()=>{const f=t.to+"/",p=o.path+"/";return[p.startsWith(f)&&"active",p===f&&"exact-active",n]},href:c,onclick:a,...u},s)}const it=Symbol("action");function Ne(t){return g(t)&&t.prototype[it]===it}class Te{constructor(r,e){d(this,"state");d(this,"actions",{});this.state=z(S(r));for(const n in e){let i=function(...u){const o=e[n].bind(r)(...u);return at(o)==="Promise"?o.then(c=>(s._merge(r),c)):(s._merge(r),o)};const s=this;i.prototype[it]=it,s.actions[n]=i}Object.assign(this.state,this.actions);for(const n in this.actions)Object.defineProperty(this.state,n,{writable:!1})}_merge(r){const e=S(r),n=Object.keys(e);for(const s in e)this.state[s]=e[s];for(const s in this.state)Ne(this.state[s])||!n.includes(s)&&delete this.state[s]}}const gt=new M;function Ue(t){const{id:r,state:e,actions:n}=t;return()=>{if(!gt.has(e)){const s=new Te(e,n);gt.set(e,s.state)}return gt.get(e)}}export{P as F,Be as L,He as R,ft as a,Se as b,Le as c,Ue as d,je as e,Ae as f,qe as g,b as h,Pe as i,S as j,De as k,Ie as l,z as m,v as n,$e as o,We as p,_e as q,fe as r,ue as s,vt as u,pe as w};
