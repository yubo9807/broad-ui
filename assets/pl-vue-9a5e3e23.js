var Xt=Object.defineProperty;var Zt=(t,r,e)=>r in t?Xt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var h=(t,r,e)=>(Zt(t,typeof r!="symbol"?r+"":r,e),e),Nt=(t,r,e)=>{if(!r.has(t))throw TypeError("Cannot "+e)};var ut=(t,r,e)=>(Nt(t,r,"read from private field"),e?e.call(t):r.get(t)),O=(t,r,e)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,e)};var P=(t,r,e)=>(Nt(t,r,"access private method"),e);function Mt(){return Number((Math.random()+"").slice(2)).toString(32)}function I(...t){console.warn(...t)}function g(t){return t.length}function wt(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function vt(t){return t.toString().slice(0,5)==="class"}function T(t){return["object","array"].includes(wt(t))}function te(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function Rt(t,r){if(T(t)&&T(r)){const e=Object.keys(t),n=Object.keys(r);if(g(e)!==g(n))return!1;for(const s of e)if(!n.includes(s)||!Rt(t[s],r[s]))return!1;return!0}else return t===r}function it(){return typeof window=="object"}function C(t){return wt(t)==="object"}function J(t){return Array.isArray(t)}function E(t){return typeof t=="string"}function y(t){return typeof t=="function"}function Q(t){Promise.resolve().then(t)}class k extends WeakMap{}function S(t,r={}){const e=new k,n=["null","regexp","date","weakset","weakmap"],s=Object.assign({function(u){const o=function(...i){return u.apply(this,i)};return o.prototype=c(u.prototype),o},set(u){const o=new Set;for(const i of u)o.add(c(i));return o},map(u){const o=new Map;for(const[i,a]of u.entries())o.set(i,c(a));return o}},r);function c(u){if(it()&&u instanceof HTMLElement)return u.cloneNode(!0);const o=wt(u);if(!["object","function"].includes(typeof u)||n.includes(o))return u;if(e.has(u))return e.get(u);if(s[o])return s[o](u);const i=J(u)?[]:{};Object.setPrototypeOf(i,Object.getPrototypeOf(u)),e.set(u,i);for(const a in u)u.hasOwnProperty(a)&&(i[a]=c(u[a]));return i}return c(t)}function X(t,r){return Object.assign({},t,r)}function d(t,r,e){let n=0;for(;n<t.length;){if(t.hasOwnProperty(n)){const s=t[n];r.apply(e,[s,n,e])}n++}}let _=null;const q=new k;function z(t){_=t,t(),_=null}function ee(t){const r=q.get(t)||[],e=r.some(n=>_===n);_&&!e&&(r.push(_),q.set(t,r))}function Tt(t){const r=q.get(t);r&&d(r,(e,n)=>{e()===!0&&(r.splice(n,1),q.set(t,r))})}function Te(...t){function r(e){const n=ct(e);for(const s in n){const c=n[s];T(c)&&r(c)}q.delete(n)}d(t,r)}const ne=new k,at=new k,Z={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function U(t){if(!T(t)||Object.isFrozen(t))return I(`lue cannot be made reactive: ${t}`),t;if(ne.get(t))return t;let r=null;return new Proxy(t,{get(e,n,s){if(n===Z.RAW)return e;const c=Reflect.get(e,n,s);return ee(e),T(c)?U(c):c},set(e,n,s,c){if(e[Z.IS_READONLY]||Reflect.get(e,n,c)===s)return!0;const o=Reflect.set(e,n,s,c),i=at.get(e)||new Set;i.add(n);const a=i.size;return at.set(e,i),Q(()=>{o&&a===1&&Tt(e),at.delete(e)}),o},deleteProperty(e,n){const s=Reflect.get(e,n),c=te(e,n),u=Reflect.deleteProperty(e,n);return r=n,Q(()=>{c&&u&&s!==void 0&&n===r&&(Tt(e),r=null)}),u}})}function re(t){return C(t)&&!!t[Z.RAW]}function ct(t){return re(t)?t[Z.RAW]:t}function se(t){const r={value:t},e=U(r);function n(){return e.value}function s(c){e.value=c}return[n,s,r]}const St=Symbol("__v_isRef");var ke;class oe{constructor(r){h(this,ke,!0);h(this,"_rawValue");h(this,"_value");h(this,"getSignal");h(this,"setSignal");const[e,n,s]=se(r);this._rawValue=s,this.getSignal=e,this.setSignal=n,this._value=e()}get value(){return this.getSignal()}set value(r){this.setSignal(r)}}ke=St;function ie(t=void 0){return new oe(t)}function Ee(t){return t&&!!t[St]}class ce{constructor(r){h(this,"fn");this.fn=r}}var Ne;class Et{constructor(r,e){h(this,"__v_isReadonly",!0);h(this,Ne,!0);h(this,"_cacheable",!0);h(this,"_dirty",!0);h(this,"computed");h(this,"_setter");this.computed=new ce(r),this._setter=e}get value(){return this.computed.fn()}set value(r){this._setter?this._setter(r):I("Write operation failed: computed value is readonly")}}Ne=St;function je(t){return y(t)?new Et(t):new Et(t.get,t.set)}function ue(t,r,e={}){let n=!1;if(n)return;const s=t();e.immediate&&r(s,void 0);let c=S(s),u=!0;return z(()=>{if(n)return!0;const o=t();if(T(o)){e.deep&&!Rt(o,c)&&(r(o,c),c=S(o));return}if(u){u=!1;return}o!==c&&(r(o,c),c=o)}),()=>{n=!0}}function F(t){return["string","number"].includes(typeof t)&&t!==""}function At(t){return!/^on/.test(t)}function ae(t){return C(t)&&E(t.tag)}function R(t){return y(t)&&!$(t)}function Dt(t){return vt(t)&&t.prototype&&t.prototype.render}function ht(t){return[void 0,null,"",!0,!1].includes(t)}function It(...t){return t.filter(e=>F(e)).join(" ").trim().replace(/\s+/," ")}function ft(t){return document.createTextNode(t)}function L(t,r){t.appendChild(r)}function b(t,r,...e){const n={tag:t,attrs:r||{},children:e};return R(n.tag)&&g(n.children)===0&&n.attrs.children&&(n.children=n.attrs.children),n}function j({children:t}){return t}const v=Symbol("Fragment");j.prototype[v]=v;function $(t){return y(t)&&t.prototype&&t.prototype[v]===v}const Y=new k;function qt(t,r=[]){return d(t,e=>{C(e)&&(R(e.tag)?(r.push({comp:e.tag,props:X(e.attrs,{children:t})}),d(e.children,n=>{R(n)&&r.push({comp:n,props:{}})})):F(e.tag)&&qt(e.children,r))}),r}function Ct(t,r=[]){const e=Y.get(t)||[];return r.push(...e),d(e,n=>{const s=Ct(n.comp);r.push(...s)}),r}let tt=null;function fe(t){tt=t}let dt=null;function Fe(t){dt=t}function le(t,r){tt=t,"ref"in r&&(r.ref.value=dt),dt=null}let xt=!1;function jt(t){xt=t}const Ft=[];function pe(){d(Ft,t=>t()),Ft.length=0}const mt=[];let Ht=!1;function Oe(t){if(!xt){if(Ht){Q(t);return}mt.push(t)}}function he(){d(mt,t=>t()),mt.length=0,Ht=!0}const et=new k;function Pe(t){if(xt)return;const r=et.get(tt)||[];r.some(n=>n===t)||(r.push(t),et.set(tt,r))}function Ot(t){const r=Ct(t).map(n=>n.comp);r.unshift(t);const e=[];d(r,n=>{const s=et.get(n)||[];e.push(...s),et.delete(n)}),d(e,n=>n())}const Pt=new k;function Lt(t){const r=Ct(t).map(n=>n.comp);r.unshift(t);const e=[];d(r,n=>{const s=Pt.get(n)||[];e.push(...s),Pt.delete(n)}),d(e,n=>n())}class de{constructor(r){h(this,"config");this.config=r}intercept(r){return r}renderToString(r){jt(!0);const e=this.createHTML(r);return jt(!1),e}createHTML(r){const{tag:e,attrs:n,children:s}=this.intercept(r);if($(e)){const o=X(n,{children:s}),i=e(o);return this.createHTMLFragment(i)}if(R(e)){if(Dt(e)){const a=new e({...n,children:s});return this.createHTML(a.render.bind(a))}const o=X(n,{children:s}),i=e(o);return this.createHTML(i)}let c="";for(const o in n){if(o.startsWith("on")||["ref","created"].includes(o))continue;let i=y(n[o])&&At(o)?n[o]():n[o];if(E(e)&&["innerHTML","innerText","textContent"].includes(o)){s[0]=i;continue}if(o==="className"){i&&(c+=` class="${It(...[i].flat())}"`);continue}if(o==="style"&&C(i)){for(const a in i)y(i[a])&&(i[a]=i[a]());i='"'+JSON.stringify(i).slice(1,-1).replace(/"/g,"").replace(/,/g,";")+'"'}c+=` ${o}="${i}"`}const u=this.createHTMLFragment(s);return`<${e}${c}>${u}</${e}>`}createHTMLFragment(r){let e="";return d(r,n=>{if(!ht(n)){if(F(n)){e+=n.toString();return}if(J(n)){e+=this.createHTMLFragment(n);return}if(y(n)){const s=n();e+=this.createHTMLFragment([s]);return}if(C(n)){e+=this.createHTML(n);return}I(`renderToString: 不支持 ${n} 值渲染`)}}),e}}var W,gt,st,Bt,ot,Ut;class Wt extends de{constructor(e){super(e);O(this,W);O(this,st);O(this,ot)}render(e){const n=this.createElement(e);return pe(),Q(he),n}createElement(e){const{tag:n,attrs:s,children:c}=this.intercept(e);if(E(n))return this.createRealNode(n,s,c);if($(n))return this.createNodeFragment(c);if(R(n))return this.createComponent(n,s,c)}createComponent(e,n,s){if(fe(e),Dt(e)){const o=new e({...n,children:s});e=o.render.bind(o)}const c=X(n,{children:s}),u=e(c);return le(e,n),F(u)?ft(u):(Y.set(e,qt([u,...u.children])),this.createElement(u))}createRealNode(e,n={},s=[""]){const c=document.createElement(e),u=n.created;if(y(u)){const o=s.findIndex(i=>i===u);o>=0&&s.splice(o,1)}d(s,o=>{if(this.intercept(o),y(o)){const i=this.createNodeFragment([o]);L(c,i)}else P(this,W,gt).call(this,c,o)});for(const o in n)P(this,st,Bt).call(this,c,o,n[o]);if(n.style&&C(n.style))for(const o in n.style){const i=n.style[o];y(i)?z(()=>c.style[o]=i()):c.style[o]=i}return c}createNodeFragment(e){const n=document.createDocumentFragment();return d(e,s=>{this.intercept(s),y(s)?P(this,ot,Ut).call(this,n,s):P(this,W,gt).call(this,n,s)}),n}createNode(e){if(F(e))return ft(e);if(ae(e))return this.createRealNode(e.tag,e.attrs,e.children);if($(e.tag))return this.createNodeFragment(e.children);if(R(e.tag))return this.createComponent(e.tag,e.attrs,e.children)}}W=new WeakSet,gt=function(e,n){if(!ht(n)){if(J(n)){const s=this.createNodeFragment(n);L(e,s);return}if(F(n)||C(n)){const s=this.createNode(n);L(e,s);return}I(`render: 不支持 ${n} 值渲染`)}},st=new WeakSet,Bt=function(e,n,s){if(n==="ref"&&C(s)){s.value=e;return}if(n==="created"&&y(s)){s(e);return}let c=u=>e[n]=u;n==="className"?c=u=>e[n]=It(...[u].flat()):n.startsWith("data-")&&(c=u=>e.dataset[n.slice(5)]=u),At(n)&&y(s)?z(()=>c(s())):c(s)},ot=new WeakSet,Ut=function(e,n){let s=[],c=!0,u=null;const o=ft("");L(e,o),z(()=>{let i=n();if(i&&C(i)&&$(i.tag)){I("不支持响应式节点片段渲染");return}J(i)||(i=[i]),i=i.filter(f=>!ht(f));let a=0;for(;a<g(i);){let f=i[a];const p=me(s,a);if(p>=0){if(Rt(f,s[p].tree)){a++;continue}const m=this.createNode(f);if(!m){i.splice(p,1),a++;continue}const N=s[p].tree;if(R(N.tag)&&Ot(N.tag),s[p].node.parentElement.replaceChild(m,s[p].node),R(N.tag)){const V=N.tag;Lt(V),Y.delete(V)}s[p].tree=f,s[p].node=m}else{const m=this.createNode(f);if(!m){a++;continue}if(c)L(e,m);else if(g(s)===0)u??(u=o.parentElement),u.insertBefore(m,o.nextSibling);else{const N=s[g(s)-1].node,V=N.nextSibling;N.parentElement.insertBefore(m,V)}s.push({key:a,tree:f,node:m})}a++}if(g(s)>g(i)){for(let f=g(i);f<g(s);f++){const p=s[f].tree;if(R(p.tag)&&Ot(p.tag),s[f].node.remove(),R(p.tag)){const m=p.tag;Lt(m),Y.delete(m)}}s.splice(g(i),g(s)-g(i))}c=!1})};function me(t,r){let e=0,n=g(t)-1;for(;e<=n;){const s=Math.ceil((e+n)/2),c=t[s];if(r===c.key)return s;r<c.key?n=s-1:r>c.key&&(e=s+1)}return-1}var B;class ge extends Wt{constructor(e){super(e);h(this,"version","0.6.5");O(this,B,new Map);this.config=e}use(e){return e.install(this),this}intercept(e){if(e&&E(e.tag)){const n=ut(this,B).get(e.tag);n&&(e.tag=n)}return e}component(e,n){return ut(this,B).set(e,n),this}}B=new WeakMap;function Le(t={}){return new ge(t)}function ye(t){return new Wt().render(t)}function _e(t,r){return ye(b(t,r))}function be(t){const r={};return t.replace(/([^?&=]+)=([^&]+)/g,(e,n,s)=>r[n]=s),r}function A(t){const r=new URL("http://0.0.0.0"+t);return{fullPath:r.href.replace(r.origin,""),path:r.pathname,query:be(r.search),hash:r.hash,meta:{}}}function Vt(t){let r="";for(const n in t.query)t.query[n]&&(r+=`${n}=${t.query[n]}&`);r=r?"?"+r.slice(0,-1):"";let e=t.hash?"#"+t.hash:"";return t.path+r+e}function G(t){return t.replace(/\/{1,}/g,"/")}function Kt(t,r){E(t)&&(w.mode==="history"&&(t=w.base+t),t=A(t));for(const n in t)l[n]=t[n];const e=Vt(l);l.fullPath=e,it()&&(w.mode==="history"?history[r==="push"?"pushState":"replaceState"]({},"",e):location.hash=e)}function zt(t){Kt(t,"push")}function kt(t){Kt(t,"replace")}function lt(t){history.go(t)}function we(){return{back:()=>lt(-1),forward:()=>lt(1),go:lt,push:zt,replace:kt,options:w,currentRoute:ct(l)}}function Yt(){return l}const w={base:"",mode:"history",ssrDataKey:"g_initialProps"};let Gt=null,l=null;function Re(t){l=t}function _t(){const{origin:t,href:r,hash:e}=location;return w.mode==="hash"?e.replace("#",""):r.replace(t+w.base,"")}let H=null;function $e(t={}){if(Object.assign(w,t),it()){const e=A(_t());l=U(e),window.addEventListener("popstate",()=>{const n=A(_t());for(const s in n)l[s]=n[s]})}else l=A("");const r=we();return{install(e){Gt=e,e.$router=r,e.$route=Yt()},...r,beforeEach(e){H=e}}}const nt={currentTemplate:"",ssrData:{}};function Ae(t){}function Jt(t,r){r=r.replace(w.base,"");const e=t.find(i=>{const{path:a,exact:f}=i.attrs;return f===!1?(r+"/").startsWith(G(a+"/")):G(a)===r});if(!e)return;const{path:n,component:s,beforeEnter:c,meta:u,redirect:o}=e.attrs;return{path:G(n),component:s,meta:u,beforeEnter:c,redirect:o}}let M;const $t=[];function Se(t){const r=ie(t.loading);let e={};function n(c){const u=Jt(t.children,c);if(!u){e={},r.value=t.notFound;return}async function o(){if(u.component.prototype||(u.component=(await u.component()).default),r.value===u.component)return;e.path=u.path;const a=bt(u.component);if(a){const f=window[w.ssrDataKey];f&&e.path in f?(e.data=f[e.path],delete f[e.path]):e.data=await a(S(e))}r.value=u.component,e.meta=u.meta,l.meta=u.meta}if(u.redirect&&u.redirect!==l.fullPath){kt(u.redirect),n(l.path);return}function i(a){a(ct(l),M,()=>{M=S(l),c===l.path?o():n(l.path)})}if(H){i(H);return}if(u.beforeEnter){i(u.beforeEnter);return}M=S(l),o()}const s=ue(()=>l.path,c=>{if(M){const u=M.path.split("/"),o=c.split("/");u[1]!==o[1]&&d($t,i=>i())}n(c)},{immediate:!0});return t.prefix&&$t.push(s),b(j,null,()=>r.value&&b(r.value,{...e}))}const D=U([]);function yt(t){const r=D.indexOf(t);D.splice(r,1)}let x=null;function Qt(t){function r(o){let i=Jt(t.children,o);if(!i)return;if(i.redirect&&i.redirect!==l.fullPath)return Re(A(i.redirect)),r(l.path);function a(f){return x=`b_${Mt()}`,D.push(x),f(ct(l),M,()=>{M=S(l),i.path!==l.path?Qt(t):(K(x,i.component,{path:i.path,meta:i.meta}),yt(x))}),x}return H?a(H):i.beforeEnter?a(i.beforeEnter):i}let e=r(l.path);if(E(e))return b(j,null,e);if(!e){const o=t.notFound;return b(o||j,null)}e=e;let n=e.component;l.meta=e.meta;const s={path:e.path,meta:e.meta};x&&(K(x,n,s),yt(x));const c=`r_${Mt()}`;if(!n.prototype)return D.push(c),n().then(async o=>{n=o.default;const i=bt(n);i&&(s.data=await i(S(s)),nt.ssrData[s.path]=s.data),K(c,n,s)}),b(j,null,c);const u=bt(n);return u?(D.push(c),u(S(s)).then(o=>{s.data=o,nt.ssrData[s.path]=o,K(c,n,s)}),b(j,null,c)):b(n,{...s})}function De(t){return d(t.children,r=>{t.prefix&&(r.attrs.path=G(t.prefix+r.attrs.path)),r.children=[r.attrs.component]}),it()?b(Se,{...t}):b(Qt,{...t})}function K(t,r,e){const n=Gt.renderToString(b(r,{...e}));yt(t);const s=nt.currentTemplate.replace(t,n);nt.currentTemplate=s}function bt(t){const{getInitialProps:r}=t.prototype;if(r&&y(r))return r}function Ie(t){const{to:r,type:e,className:n,children:s,onClick:c,...u}=t,o=Yt();E(r)||(t.to=Vt(Object.assign({},o,r)));const i=w.mode==="hash"?`${w.base}#${t.to}`:w.base+t.to;function a(f){f.preventDefault();function p(m=t.to){e==="replace"?kt(m):zt(m)}c?c(t.to,p):p()}return b("a",{className:()=>{const f=t.to+"/",p=o.path+"/";return[p.startsWith(f)&&"active",p===f&&"exact-active",n]},href:i,onclick:a,...u},s)}const rt=Symbol("action");function Ce(t){return y(t)&&t.prototype[rt]===rt}class xe{constructor(r,e){h(this,"state");h(this,"actions");this.state=U(S(r)),this.actions={};for(const n in e){let c=function(...u){const o=e[n].bind(r)(...u);if(T(o)&&o[Symbol.toStringTag]==="Promise")o.then(i=>(s._merge(r),i));else return s._merge(r),o};const s=this;c.prototype[rt]=rt,s.actions[n]=c}Object.assign(this.state,this.actions);for(const n in this.actions)Object.defineProperty(this.state,n,{writable:!1})}_merge(r){const e=S(r),n=Object.keys(e);for(const s in e)this.state[s]=e[s];for(const s in this.state)Ce(this.state[s])||!n.includes(s)&&delete this.state[s]}}const pt=new k;function qe(t){const{id:r,state:e,actions:n}=t;return()=>{if(!pt.has(e)){const s=new xe(e,n);pt.set(e,s.state)}return pt.get(e)}}export{j as F,Ie as L,De as R,it as a,ye as b,je as c,qe as d,Te as e,Pe as f,Ae as g,b as h,Ee as i,S as j,Le as k,$e as l,U as m,Q as n,Oe as o,_e as p,Fe as q,ie as r,se as s,Yt as u,ue as w};
