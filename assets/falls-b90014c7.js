var d=Object.defineProperty;var _=(n,t,o)=>t in n?d(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var l=(n,t,o)=>(_(n,typeof t!="symbol"?t+"":t,o),o);import{a}from"./array-4873fd0c.js";class g{constructor(t={}){l(this,"option");l(this,"_matrix");const{column:o,rowGap:s,colGap:e,el:i}=t;if(this.option={column:o||5,rowGap:s||20,colGap:e||14},!i)return;i.style.position="relative";const r=[...i.children],h=r.map(p=>p.offsetHeight),{itemWidth:c,positions:m,wrapHeight:x}=this.compute(i.clientWidth,h);r.forEach((p,u)=>{p.style.position="absolute",p.style.width=c+"px",p.style.top=m[u].top+"px",p.style.left=m[u].left+"px"}),i.style.height=x+"px"}compute(t,o){const s=this.computeItemWidth(t),e=this.computeItemPosition(o,s),i=this.computeWrapHeight();return{itemWidth:s,positions:e,wrapHeight:i}}computeItemWidth(t){return(t-this.option.rowGap*(this.option.column-1))/this.option.column}computeItemPosition(t,o){this._matrix=a(this.option.column,[0]);const s=[];for(let e=0;e<t.length;e++){const i=this._queryColumn("min"),r=this._matrix[i].reduce((h,c)=>h+c);s.push({top:r+this.option.colGap*(this._matrix[i].length-1),left:i*(o+this.option.rowGap)}),this._matrix[i].push(t[e])}return s}computeWrapHeight(){const t=this._queryColumn("max");return this._matrix[t].reduce((o,s)=>o+s+this.option.rowGap)-this.option.rowGap}_queryColumn(t){const o=a(this._matrix.length,0);for(let e=0;e<this._matrix.length;e++)o[e]=this._matrix[e].reduce((i,r)=>i+r);const s=Math[t].apply(null,o);return o.indexOf(s)}}export{g as F};
