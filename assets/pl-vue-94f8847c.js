var Le=Object.defineProperty;var qe=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var d=(e,t,n)=>(qe(e,typeof t!="symbol"?t+"":t,n),n);function he(){return Number((Math.random()+"").slice(2)).toString(32)}function F(...e){console.warn(...e)}function h(e){return e.length}function ie(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function Ve(e){return e.toString().slice(0,5)==="class"}function T(e){return["object","array"].includes(ie(e))}function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t){if(T(e)&&T(t)){const n=Object.keys(e),r=Object.keys(t);if(h(n)!==h(r))return!1;for(const o of n)if(!r.includes(o)||!ce(e[o],t[o]))return!1;return!0}else return e===t}function ue(){return typeof window=="object"}function b(e){return ie(e)==="object"}function Q(e){return Array.isArray(e)}function M(e){return typeof e=="string"}function m(e){return typeof e=="function"}function I(e){Promise.resolve().then(e)}function S(e,t={}){const n=new WeakMap,r=["null","regexp","date","weakset","weakmap"],o=Object.assign({function(s){const c=function(...u){return s.apply(this,u)};return c.prototype=i(s.prototype),c},set(s){const c=new Set;for(const u of s)c.add(i(u));return c},map(s){const c=new Map;for(const[u,f]of s.entries())c.set(u,i(f));return c}},t);function i(s){const c=ie(s);if(!["object","function"].includes(typeof s)||r.includes(c))return s;if(n.has(s))return n.get(s);if(o[c])return o[c](s);const u=Q(s)?[]:{};Object.setPrototypeOf(u,Object.getPrototypeOf(s)),n.set(s,u);for(const f in s)u[f]=i(s[f]);return u}return i(e)}function L(e,t){return Object.assign({},e,t)}function p(e,t,n){let r=0;for(;r<e.length;){if(e.hasOwnProperty(r)){const o=e[r];t.apply(n,[o,r,n])}r++}}let N=null;const q=new WeakMap;function X(e){N=e,e(),N=null}function Ue(e){const t=q.get(e)||[],n=t.some(r=>N===r);N&&!n&&(t.push(N),q.set(e,t))}function me(e){const t=q.get(e);t&&p(t,(n,r)=>{n()===!0&&(t.splice(r,1),q.set(e,t))})}const Ke=new WeakMap,ee=new WeakMap,V={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function Z(e){if(!T(e)||Object.isFrozen(e))return F(`lue cannot be made reactive: ${e}`),e;if(Ke.get(e))return e;let t=null;return new Proxy(e,{get(n,r,o){if(r===V.RAW)return n;const i=Reflect.get(n,r,o);return Ue(n),T(i)?Z(i):i},set(n,r,o,i){if(n[V.IS_READONLY]||Reflect.get(n,r,i)===o)return!0;const c=Reflect.set(n,r,o,i),u=ee.get(n)||new Set;u.add(r);const f=u.size;return ee.set(n,u),I(()=>{c&&f===1&&me(n),ee.delete(n)}),c},deleteProperty(n,r){const o=Reflect.get(n,r),i=Be(n,r),s=Reflect.deleteProperty(n,r);return t=r,I(()=>{i&&s&&o!==void 0&&r===t&&(me(n),t=null)}),s}})}function ze(e){return b(e)&&!!e[V.RAW]}function fe(e){return ze(e)?e[V.RAW]:e}function He(e){const t={value:e},n=Z(t);function r(){return n.value}function o(i){n.value=i}return[r,o,t]}const Ce="__v_isRef";var pt;class Ye{constructor(t){d(this,pt,!0);d(this,"__v_isShallow",!1);d(this,"_rawValue");d(this,"_value");d(this,"getSignal");d(this,"setSignal");const[n,r,o]=He(t);this._rawValue=o,this.getSignal=n,this.setSignal=r,this._value=n()}get value(){return this.getSignal()}set value(t){this.setSignal(t)}}pt=Ce;function Ge(e=void 0){return new Ye(e)}class Je{constructor(t){d(this,"fn");this.fn=t}}var dt;class ye{constructor(t,n){d(this,"__v_isReadonly",!0);d(this,dt,!0);d(this,"_cacheable",!0);d(this,"_dirty",!0);d(this,"computed");d(this,"_setter");this.computed=new Je(t),this._setter=n}get value(){return this.computed.fn()}set value(t){this._setter?this._setter(t):F("Write operation failed: computed value is readonly")}}dt=Ce;function mt(e){return m(e)?new ye(e):new ye(e.get,e.set)}function Qe(e,t,n={}){let r=!1;if(r)return;const o=e();n.immediate&&t(o,void 0);let i=S(o),s=!0;return X(()=>{if(r)return!0;const c=e();if(T(c)){n.deep&&!ce(c,i)&&(t(c,i),i=S(c));return}if(s){s=!1;return}c!==i&&(t(c,i),i=c)}),()=>{r=!0}}function j(e){return["string","number"].includes(typeof e)&&e!==""}function Ee(e){return!/^on/.test(e)}function Me(e){return b(e)&&(M(e.tag)||O(e.tag))}function w(e){return m(e)&&!O(e)}function je(e){return Ve(e)&&e.prototype&&e.prototype.render}function Oe(e){return[void 0,null,"",!0,!1].includes(e)}function Ne(...e){return e.filter(n=>j(n)).join(" ").trim().replace(/\s+/," ")}function v(e){return document.createTextNode(e)}function x(e,t){e.appendChild(t)}function y(e,t,...n){const r={tag:e,attrs:t||{},children:n};return w(r.tag)&&h(r.children)===0&&r.attrs.children&&(r.children=r.attrs.children),r}function E({children:e}){return e}const B=Symbol("Fragment");E.prototype[B]=B;function O(e){return m(e)&&e.prototype&&e.prototype[B]===B}const U=new WeakMap;function Pe(e,t=[]){return p(e,n=>{b(n)&&(w(n.tag)?(t.push({comp:n.tag,props:L(n.attrs,{children:e})}),p(n.children,r=>{w(r)&&t.push({comp:r,props:{}})})):j(n.tag)&&Pe(n.children,t))}),t}function ae(e,t=[]){const n=U.get(e)||[];return t.push(...n),p(n,r=>{const o=ae(r.comp);t.push(...o)}),t}let K=null;function Xe(e){K=e}let ne=null;function yt(e){ne=e}function Ze(e,t){K=e,"ref"in t&&(t.ref.value=ne),ne=null}let le=!1;function ge(e){le=e}const z=new WeakMap;function gt(e){if(le)return;const t=z.get(K)||[];t.some(r=>r===e)||(t.push(e),z.set(K,t))}function we(e){const t=ae(e).map(r=>r.comp);t.unshift(e);const n=[];p(t,r=>{const o=z.get(r)||[];n.push(...o),z.delete(r)}),p(n,r=>r())}const be=new WeakMap;function Re(e){const t=ae(e).map(r=>r.comp);t.unshift(e);const n=[];p(t,r=>{const o=be.get(r)||[];n.push(...o),be.delete(r)}),p(n,r=>r())}function C(e,t,n){if(M(e))return Te(e,t,n);if(m(e)){if(e=e,O(e))return pe(n);if(je(e))return C(e.prototype.render,t,n);Xe(e);const r=L(t,{children:n}),o=e(r);return Ze(e,t),j(o)?v(o):(U.set(e,Pe([o,...o.children])),C(o.tag,o.attrs,o.children))}}function Te(e,t={},n=[""]){if(m(e)&&O(e))return C(e,t,n);const r=document.createElement(e);p(n,o=>{if(m(o)){const i=pe([o]);x(r,i)}else $e(r,o)});for(const o in t)ve(r,o,t[o]);if(t.style&&b(t.style))for(const o in t.style){const i=t.style[o];m(i)?X(()=>r.style[o]=i()):r.style[o]=i}return r}function ve(e,t,n){if(t==="ref"&&b(n)){n.value=e;return}if(t==="created"&&m(n)){n(e);return}let r=o=>e[t]=o;t==="className"?r=o=>e[t]=Ne(...[o].flat()):t.startsWith("data-")&&(r=o=>e.dataset[t.slice(5)]=o),Ee(t)&&m(n)?X(()=>r(n())):r(n)}function pe(e){const t=document.createDocumentFragment();return p(e,n=>{m(n)?tt(t,n):$e(t,n)}),t}function $e(e,t){if(!Oe(t)){if(j(t)){const n=v(t);n.nodeValue=t,x(e,n);return}if(Q(t)){const n=pe(t);x(e,n);return}if(Me(t)){const n=Te(t.tag,t.attrs,t.children);x(e,n);return}if(b(t)&&w(t.tag)){const n=C(t.tag,t.attrs,t.children);x(e,n);return}F(`render: 不支持 ${t} 值渲染`)}}function Se(e){if(j(e))return v(e);if(Me(e)||b(e)&&w(e.tag))return C(e.tag,e.attrs,e.children)}function et(e,t){let n=0,r=h(e)-1;for(;n<=r;){const o=Math.ceil((n+r)/2),i=e[o];if(t===i.key)return o;t<i.key?r=o-1:t>i.key&&(n=o+1)}return-1}function tt(e,t){let n=[],r=!0,o=null;const i=v("");x(e,i),X(()=>{let s=t();if(s&&b(s)&&O(s.tag)){F("不支持响应式节点片段渲染");return}Q(s)||(s=[s]),s=s.filter(u=>!Oe(u));let c=0;for(;c<h(s);){let u=s[c];const f=et(n,c);if(f>=0){if(ce(u,n[f].tree)){c++;continue}const a=Se(u);if(!a){s.splice(f,1),c++;continue}const k=n[f].tree;if(w(k.tag)&&we(k.tag),n[f].node.parentElement.replaceChild(a,n[f].node),w(k.tag)){const W=k.tag;Re(W),U.delete(W)}n[f].tree=u,n[f].node=a}else{const a=Se(u);if(!a){c++;continue}if(r)x(e,a);else if(h(n)===0)o??(o=i.parentElement),o.insertBefore(a,i.nextSibling);else{const k=n[h(n)-1].node,W=k.nextSibling;k.parentElement.insertBefore(a,W)}n.push({key:c,tree:u,node:a})}c++}if(h(n)>h(s)){for(let u=h(s);u<h(n);u++){const f=n[u].tree;if(w(f.tag)&&we(f.tag),n[u].node.remove(),w(f.tag)){const a=f.tag;Re(a),U.delete(a)}}n.splice(h(s),h(n)-h(s))}r=!1})}function H(e,t={},n=[""]){if(O(e)){const i=L(t,{children:n}),s=e(i);return Y(s)}if(w(e)){if(e=e,je(e))return H(e.prototype.render,{},[]);const i=L(t,{children:n}),s=e(i);return H(s.tag,s.attrs,s.children)}let r="";for(const i in t){if(i.startsWith("on")||i==="ref")continue;let s=m(t[i])&&Ee(i)?t[i]():t[i];if(M(e)&&["innerHTML","innerText"].includes(i)){n=[s];continue}if(i==="className"){s&&(r+=` class="${Ne(...[s].flat())}"`);continue}if(i==="style"&&b(s)){for(const c in s)m(s[c])&&(s[c]=s[c]());s='"'+JSON.stringify(s).slice(1,-1).replace(/"/g,"").replace(/,/g,";")+'"'}r+=` ${i}="${s}"`}const o=Y(n);return`<${e}${r}>${o}</${e}>`}function Y(e){let t="";return p(e,n=>{if(j(n)){t+=n.toString();return}if(Q(n)){t+=Y(n);return}if(m(n)){const r=n();t+=Y([r]);return}if(b(n)){t+=H(n.tag,n.attrs,n.children);return}F(`renderToString: 不支持 ${n} 值渲染`)}),t}const ke=[];function nt(){p(ke,e=>e()),ke.length=0}const re=[];let Fe=!1;function wt(e){if(!le){if(Fe){I(e);return}re.push(e)}}function rt(){p(re,e=>e()),re.length=0,Fe=!0}function ot({tag:e,attrs:t,children:n}){const r=C(e,t,n);return nt(),I(rt),r}function st({tag:e,attrs:t,children:n}){ge(!0);const r=H(e,t,n);return ge(!1),r}function bt(e,t){return ot(y(e,t))}function it(e){const t={};return e.replace(/([^?&=]+)=([^&]+)/g,(n,r,o)=>t[r]=o),t}function G(e){const t=new URL("http://0.0.0.0"+e);return{fullPath:t.href.replace(t.origin,""),path:t.pathname,query:it(t.search),hash:t.hash,meta:{}}}function ct(e){let t="";for(const r in e.query)e.query[r]&&(t+=`${r}=${e.query[r]}&`);t=t?"?"+t.slice(0,-1):"";let n=e.hash?"#"+e.hash:"";return e.path+t+n}function D(e){return e.replace(/\/{1,}/g,"/")}function We(e,t){M(e)&&(g.mode==="history"&&(e=g.base+e),e=G(e));for(const r in e)l[r]=e[r];const{fullPath:n}=l;ue()&&(g.mode==="history"?history[t==="push"?"pushState":"replaceState"]({},"",n):location.hash=n)}function Ae(e){We(e,"push")}function de(e){We(e,"replace")}function te(e){history.go(e)}function ut(){return{back:()=>te(-1),forward:()=>te(1),go:te,push:Ae,replace:de,options:g,currentRoute:fe(l)}}function ft(){return l}const g={base:"",mode:"history",ssrDataKey:"g_initialProps"};let l=null;function at(e){l=e}function _e(){const{origin:e,href:t,hash:n}=location;return g.mode==="hash"?n.replace("#",""):t.replace(e+g.base,"")}let $=null;function Rt(e={}){if(Object.assign(g,e),ue()){const t=G(_e());l=Z(t),window.addEventListener("popstate",()=>{const n=G(_e());for(const r in n)l[r]=n[r]})}return{...ut(),beforeEach(t){$=t}}}const J={currentTemplate:"",ssrData:{}};function St(e){}function De(e,t){t=t.replace(g.base,"");const n=e.find(u=>{const{path:f,exact:a}=u.attrs;return a===!1?(t+"/").startsWith(D(f+"/")):D(f)===t});if(!n)return;const{path:r,component:o,beforeEnter:i,meta:s,redirect:c}=n.attrs;return{path:D(r),component:o,meta:s,beforeEnter:i,redirect:c}}let _;const xe=[];function lt(e){const t=Ge();let n={};function r(i){const s=De(e.children,i);if(!s){n={},t.value=e.notFound;return}async function c(){if(s.component.prototype||(s.component=(await s.component()).default),t.value===s.component)return;n.path=s.path;const f=se(s.component);if(f){const a=window[g.ssrDataKey];a&&n.path in a?(n.data=a[n.path],delete a[n.path]):n.data=await f(S(n))}t.value=s.component,n.meta=s.meta,l.meta=s.meta}if(s.redirect&&s.redirect!==l.fullPath){de(s.redirect),r(l.path);return}function u(f){f(fe(l),_,()=>{_=S(l),i===l.path?c():r(l.path)})}if($){u($);return}if(s.beforeEnter){u(s.beforeEnter);return}_=S(l),c()}const o=Qe(()=>l.path,i=>{if(_){const s=_.path.split("/"),c=i.split("/");s[1]!==c[1]&&p(xe,u=>u())}r(i)},{immediate:!0});return e.prefix&&xe.push(o),y(E,null,()=>y(t.value,{...n}))}const P=Z([]);function oe(e){const t=P.indexOf(e);P.splice(t,1)}let R=null;function Ie(e){function t(c){let u=De(e.children,c);if(u.redirect&&u.redirect!==l.fullPath)return at(G(u.redirect)),t(l.path);function f(a){return R=`b_${he()}`,P.push(R),a(fe(l),_,()=>{_=S(l),u.path!==l.path?Ie(e):(A(R,u.component,{path:u.path,meta:u.meta}),oe(R))}),R}return $?f($):u.beforeEnter?f(u.beforeEnter):u}let n=t(l.path);if(M(n))return y(E,null,n);if(!n){const c=e.notFound;return y(c||E,null)}n=n;let r=n.component;l.meta=n.meta;const o={path:n.path,meta:n.meta};R&&(A(R,r,o),oe(R));const i=`r_${he()}`;if(!r.prototype)return P.push(i),r().then(async c=>{r=c.default;const u=se(r);u&&(o.data=await u(S(o)),J.ssrData[o.path]=o.data),A(i,r,o)}),y(E,null,i);const s=se(r);return s?(P.push(i),s(S(o)).then(c=>{o.data=c,J.ssrData[o.path]=c,A(i,r,o)}),y(E,null,i)):y(r,{...o})}function kt(e){return p(e.children,t=>{e.prefix&&(t.attrs.path=D(e.prefix+t.attrs.path)),t.children=[t.attrs.component]}),ue()?y(lt,{...e}):y(Ie,{...e})}function A(e,t,n){const r=st(y(t,{...n}));oe(e);const o=J.currentTemplate.replace(e,r);J.currentTemplate=o}function se(e){const{getInitialProps:t}=e.prototype;if(t&&m(t))return t}function _t(e){const{to:t,type:n,className:r,children:o,...i}=e;M(t)||(e.to=ct(e.to));const s=g.mode==="hash"?`${g.base}#${e.to}`:g.base+e.to;function c(f){f.preventDefault(),n==="replace"?de(e.to):Ae(e.to)}const u=ft();return y("a",{className:()=>{const f=e.to+"/",a=u.path+"/";return[a.startsWith(f)&&"active",a===f&&"exact-active",r]},href:s,onclick:c,...i},o)}export{E as F,_t as L,kt as R,ot as a,St as b,mt as c,wt as d,S as e,bt as f,He as g,y as h,Rt as i,yt as j,I as n,gt as o,Ge as r,ft as u,Qe as w};
